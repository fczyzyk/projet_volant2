<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>todayyy – regex</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">todayyy</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">CeCi</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./regex.html" aria-current="page">À la découverte des expressions régulières avec R (et d’autres packages au passage…)</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#à-la-découverte-des-expressions-régulières-avec-r-et-dautres-packages-au-passage" id="toc-à-la-découverte-des-expressions-régulières-avec-r-et-dautres-packages-au-passage" class="nav-link active" data-scroll-target="#à-la-découverte-des-expressions-régulières-avec-r-et-dautres-packages-au-passage">À la découverte des expressions régulières avec R (et d’autres packages au passage…)</a></li>
  <li><a href="#mission-daujourdhui" id="toc-mission-daujourdhui" class="nav-link" data-scroll-target="#mission-daujourdhui">Mission d’aujourd’hui:</a>
  <ul class="collapse">
  <li><a href="#début-de-solution-en-base-r" id="toc-début-de-solution-en-base-r" class="nav-link" data-scroll-target="#début-de-solution-en-base-r">Début de solution en base R</a></li>
  </ul></li>
  <li><a href="#solution-à-la-tidyverse" id="toc-solution-à-la-tidyverse" class="nav-link" data-scroll-target="#solution-à-la-tidyverse">Solution à la Tidyverse</a></li>
  <li><a href="#un-peu-de-regex" id="toc-un-peu-de-regex" class="nav-link" data-scroll-target="#un-peu-de-regex">Un peu de regex</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour télécharger le fichier: <a href="./assets/fichier/_regex.qmd">regex.qmd</a></p>
</div>
</div>
<section id="à-la-découverte-des-expressions-régulières-avec-r-et-dautres-packages-au-passage" class="level2">
<h2 class="anchored" data-anchor-id="à-la-découverte-des-expressions-régulières-avec-r-et-dautres-packages-au-passage">À la découverte des expressions régulières avec R (et d’autres packages au passage…)</h2>
<p>Les <strong>expressions régulières</strong> sont communément appelées <strong>regex</strong> ou <strong>regexp</strong> pour <strong>regular expressions</strong> en anglais. Selon Wikipédia, une expression régulière est “une chaîne de caractères, qui décrit, selon une syntaxe précise, un ensemble de chaînes de caractères possibles”. Si vous n’avez jamais entendu parlé des regex, il se peut que cette définition ne vous aide pas à comprendre le concept. Nous tenterons de démystifier le tout au cours de ces exercices.</p>
<p>À titre de rappel, cet <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/translations/french/regex_fr.pdf">aide-mémoire</a> vous sera drôlement utile!</p>
<p>En résumé, ces expressions permettent de décrire des motifs (patterns) à l’aide de formules “<em>relativement simples</em>” pour trouver, valider, extraire ou modifier du texte ou des nombres.</p>
</section>
<section id="mission-daujourdhui" class="level2">
<h2 class="anchored" data-anchor-id="mission-daujourdhui">Mission d’aujourd’hui:</h2>
<p>Récolter le plus d’information possible qui se trouve dans les tableaux de la page suivante: <a href="https://tc.canada.ca/fr/aviation/exploitation-aeroports-aerodromes/liste-aeroports-appartenant-transports-canada" class="uri">https://tc.canada.ca/fr/aviation/exploitation-aeroports-aerodromes/liste-aeroports-appartenant-transports-canada</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
✔ tibble  3.1.8      ✔ dplyr   1.0.10
✔ tidyr   1.2.1      ✔ stringr 1.4.1 
✔ readr   2.1.3      ✔ forcats 0.5.2 
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'magrittr'

The following object is masked from 'package:purrr':

    set_names

The following object is masked from 'package:tidyr':

    extract</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'rvest'

The following object is masked from 'package:readr':

    guess_encoding</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>URL <span class="ot">&lt;-</span> <span class="st">"https://tc.canada.ca/fr/aviation/exploitation-aeroports-aerodromes/liste-aeroports-appartenant-transports-canada"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="début-de-solution-en-base-r" class="level3">
<h3 class="anchored" data-anchor-id="début-de-solution-en-base-r">Début de solution en base R</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>base_raw_html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="at">x =</span> URL)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>base_html_table <span class="ot">&lt;-</span> <span class="fu">html_elements</span>(<span class="at">x =</span> base_raw_html, <span class="at">css =</span> <span class="st">"table"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>base_tables <span class="ot">&lt;-</span> <span class="fu">html_table</span>(<span class="at">x =</span> base_html_table)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># base_table &lt;- rbind(base_tables[[1]], base_tables[[2]], base_tables[[3]])</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>⚠️ Erreur! Une colonne n’est pas nommée de façon identique, donc ne fonctionne pas… Corrigeons la situation</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(base_tables[[<span class="dv">3</span>]])[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Province/Territoire"</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>base_table <span class="ot">&lt;-</span> <span class="fu">rbind</span>(base_tables[[<span class="dv">1</span>]], base_tables[[<span class="dv">2</span>]], base_tables[[<span class="dv">3</span>]])</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>base_table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 44 × 3
   `Province/Territoire`  Aéroport                `Exploité par`                
   &lt;chr&gt;                  &lt;chr&gt;                   &lt;chr&gt;                         
 1 "Colombie-Britannique" Penticton               "Transports Canada\n\t\t\t#10…
 2 ""                     Port Hardy              "Transports Canada\n\t\t\tC.P…
 3 ""                     Sandspit                "Transports Canada\n\t\t\tC.P…
 4 ""                     Havre de Victoria       "Transports Canada\n\t\t\t12,…
 5 "Manitoba"             Churchill               "Transports Canada\n\t\t\tC.P…
 6 "Québec"               Chevery                 "Municipalité de la Côte-Nord…
 7 ""                     Lourdes-de-Blanc-Sablon "Transports Canada\n\t\t\tAir…
 8 ""                     Sept-Îles               "Transports Canada\n\t\t\t100…
 9 ""                     Natashquan              "Municipalité de Natashquan\n…
10 ""                     Eastmain River          "Transports Canada\n\t\t\ta/s…
# … with 34 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Solution en Base R</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>base_table<span class="sc">$</span><span class="st">`</span><span class="at">Province/Territoire</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="at">test =</span> <span class="fu">is.na</span>(base_table<span class="sc">$</span><span class="st">`</span><span class="at">Province/Territoire</span><span class="st">`</span>),</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">yes =</span> base_table<span class="sc">$</span>Territoire, <span class="at">no =</span> base_table<span class="sc">$</span><span class="st">`</span><span class="at">Province/Territoire</span><span class="st">`</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>base_table<span class="sc">$</span>Territoire <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span>(<span class="fu">ls</span>(<span class="at">pattern =</span> <span class="st">"base*"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="solution-à-la-tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="solution-à-la-tidyverse">Solution à la Tidyverse</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>URL <span class="ot">&lt;-</span> <span class="st">"https://tc.canada.ca/fr/aviation/exploitation-aeroports-aerodromes/liste-aeroports-appartenant-transports-canada"</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># raw_html &lt;- read_html(x = URL)</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># html_table &lt;- html_elements(x = raw_html, css = "table")</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># base_tables &lt;- html_table(x = html_table)</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>tables_pipe <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="at">x =</span> URL) <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="fu">html_elements</span>(<span class="at">css =</span> <span class="st">"table"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="fu">html_table</span>()</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>table_pipe <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(tables_pipe[[<span class="dv">1</span>]], tables_pipe[[<span class="dv">2</span>]], tables_pipe[[<span class="dv">3</span>]], <span class="at">.id =</span> <span class="st">"type"</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>table_pipe <span class="ot">&lt;-</span> table_pipe <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">prov_territ =</span> <span class="st">`</span><span class="at">Province/Territoire</span><span class="st">`</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>                            <span class="at">aeroport =</span> <span class="st">`</span><span class="at">Aéroport</span><span class="st">`</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exploitE_par =</span> <span class="st">`</span><span class="at">Exploité par</span><span class="st">`</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>                            <span class="at">territoire =</span> Territoire)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co"># https://tidyr.tidyverse.org/reference/unite.html</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co"># ou alors dplyr::coalesce</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co"># https://tidyr.tidyverse.org/reference/fill.html</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>table_pipe <span class="ot">&lt;-</span> table_pipe <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">na_if</span>(<span class="at">y =</span> <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="at">col =</span> prov_territ, </span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>        prov_territ, territoire, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">na_if</span>(<span class="at">y =</span> <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">fill</span>(prov_territ, <span class="at">.direction =</span> <span class="st">"down"</span>) </span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as.data.frame</span>(table_pipe))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   type               prov_territ
1     1      Colombie-Britannique
2     1      Colombie-Britannique
3     1      Colombie-Britannique
4     1      Colombie-Britannique
5     1                  Manitoba
6     1                    Québec
7     1                    Québec
8     1                    Québec
9     1                    Québec
10    1                    Québec
11    1                    Québec
12    1                    Québec
13    1                    Québec
14    1                    Québec
15    1                    Québec
16    1                    Québec
17    1               Terre-Neuve
18    1               Terre-Neuve
19    2      Colombie-Britannique
20    2      Colombie-Britannique
21    2      Colombie-Britannique
22    2      Colombie-Britannique
23    2                   Alberta
24    2                   Alberta
25    2              Saskatchewan
26    2              Saskatchewan
27    2                  Manitoba
28    2                   Ontario
29    2                   Ontario
30    2                   Ontario
31    2                   Ontario
32    2                    Québec
33    2                    Québec
34    2                    Québec
35    2         Nouveau-Brunswick
36    2         Nouveau-Brunswick
37    2         Nouveau-Brunswick
38    2     Île-du-Prince-Édouard
39    2           Nouvelle-Écosse
40    2               Terre-Neuve
41    2               Terre-Neuve
42    3 Territoires du Nord-Ouest
43    3                   Nunavut
44    3                     Yukon
                                                  aeroport
1                                                Penticton
2                                               Port Hardy
3                                                 Sandspit
4                                        Havre de Victoria
5                                                Churchill
6                                                  Chevery
7                                  Lourdes-de-Blanc-Sablon
8                                                Sept-Îles
9                                               Natashquan
10                                          Eastmain River
11                                      Havre-Saint-Pierre
12                                    Îles-de-la-Madeleine
13                                             Waskaganish
14                                                Kuujjuaq
15                                           Schefferville
16                                                Wemindji
17                                                  Wabush
18                                             St. Anthony
19                                          Victoria (YYJ)
20                                         Vancouver (YVR)
21                                     Prince George (YXS)
22                                           Kelowna (YLW)
23                                          Edmonton (YEG)
24                                           Calgary (YYC)
25                                         Saskatoon (YXE)
26                                            Regina (YQR)
27   Aéroport James Armstrong Richardson de Winnipeg (YWG)
28                                       Thunder Bay (YQT)
29                                            London (YXU)
30                                   Toronto Pearson (YYZ)
31               Aéroport Macdonald-Cartier d’Ottawa (YOW)
32       Aéroport Pierre-Elliott-Trudeau de Montréal (YUL)
33                 Aéroport international de Mirabel (YMX)
34                    Aéroport Jean-Lesage de Québec (YQB)
35                                       Fredericton (YFC)
36                                     Grand Moncton (YQM)
37                                        Saint John (YSJ)
38                                     Charlottetown (YYG)
39                              Stanfield de Halifax (YHZ)
40                                            Gander (YQX)
41                                        St. John’s (YYT)
42                                       Yellowknife (YZF)
43                                           Iqaluit (YFB)
44 Aéroport international Erik-Nielsen de Whitehorse (YXY)
                                                                                                                    exploitE_par
1           Transports Canada\n\t\t\t#109-3000 Airport Road\n\t\t\tPenticton (Colombie-Britannique)&nbsp; V2A 8X1\n\t\t\t250-770-4414
2  Transports Canada\n\t\t\tC.P. 460\n\t\t\t3675 Byng Road\n\t\t\tPort Hardy (Colombie-Britannique)&nbsp; V0N 2P0\n\t\t\t250-949-6424
3                          Transports Canada\n\t\t\tC.P. 439\n\t\t\tSandspit (Colombie-Britannique)&nbsp; V0T 1T0\n\t\t\t250-637-1149
4                      Transports Canada\n\t\t\t12, rue Erie\n\t\t\tVictoria (Colombie-Britannique)&nbsp; V8V 1Y4\n\t\t\t250-363-3578
5                                    Transports Canada\n\t\t\tC.P. 1059\n\t\t\tChurchill (Manitoba)&nbsp; R0B 0E0\n\t\t\t204-675-8868
6                    Municipalité de la Côte-Nord-du Golfe-du Saint-Laurent\n\t\t\tChevery (Québec)&nbsp; G0G 1G0\n\t\t\t418-787-2215
7                     Transports Canada\n\t\t\tAirport Road\n\t\t\tLourdes-de-Blanc-Sablon (Québec)&nbsp; G0G&nbsp;1W0\n\t\t\t418-461-2514
8         Transports Canada\n\t\t\t1000, boul. Laure Est\n\t\t\tC.P. 2001\n\t\t\tSept-Îles (Québec)&nbsp; G4R 4K2\n\t\t\t418-962-8211
9                         Municipalité de Natashquan\n\t\t\tAirport Road\n\t\t\tNatashquan (Québec)&nbsp; G0G 2E0\n\t\t\t418-726-3273
10                        Transports Canada\n\t\t\ta/s du conseil de bande\n\t\t\tEastmain (Québec)&nbsp; J0M 1W0\n\t\t\t819-977-0333
11    Transports Canada\n\t\t\t1550 B, route de l'Aéroport\n\t\t\tHavre-Saint-Pierre (Québec)\n\t\t\tG0G 1P0\n\t\t\t418-538-0627
12     Transports Canada\n\t\t\t1-210, chemin de l’Aéroport\n\t\t\tHavre-aux-Maisons (Québec)\n\t\t\tG4T 5L2\n\t\t\t418-969-2180
13                     Transports Canada\n\t\t\ta/s du conseil de bande\n\t\t\tWaskaganish (Québec)&nbsp; J0M 1R0\n\t\t\t819-895-8925
14                          Administration régionale Kativik\n\t\t\tC.P. 9\n\t\t\tKuujjuaq (Québec)&nbsp; J0M 1C0\n\t\t\t819-964-2968
15     Société aéroportuaire de Schefferville\n\t\t\t78 Atlantic Road\n\t\t\tSchefferville (Québec)&nbsp;&nbsp;G0G 2T0\n\t\t\t418-585-3544
16                        Transports Canada\n\t\t\ta/s du conseil de bande\n\t\t\tWemindji (Québec)&nbsp;&nbsp;J0M 1L0\n\t\t\t819-978-3936
17                              Transports Canada\n\t\t\t2 Airport Road\n\t\t\tWabush (Terre-Neuve)&nbsp;&nbsp;A0R 1B0\n\t\t\t709-282-5412
18                         Transports Canada\n\t\t\t1 Airport Road\n\t\t\tSt. Anthony (Terre-Neuve)&nbsp;&nbsp;A0K 4S0\n\t\t\t709-454-3192
19                                                                                      Administration aéroportuaire de Victoria
20                                                                       Administration de l’aéroport international de Vancouver
21                                                     Administration aéroportuaire de Prince George Inc. (en anglais seulement)
22                                                                                       Ville de Kelowna (en anglais seulement)
23                                                      Administration des aéroports régionaux d’Edmonton (en anglais seulement)
24                                                                Administration aéroportuaire de Calgary (en anglais seulement)
25                                                              Administration aéroportuaire de Saskatoon (en anglais seulement)
26                                                                                        Administration aéroportuaire de Regina
27                                                                                 Administration aéroportuaire de Winnipeg Inc.
28                                         Administration de l’aéroport international de Thunder Bay Inc. (en anglais seulement)
29                                             Administration de l’aéroport international du Grand London (en anglais seulement)
30                                                                                       Autorité aéroportuaire du Grand Toronto
31                                                         Administration de l’aéroport international Macdonald-Cartier d'Ottawa
32                                                                                                         Aéroports de Montréal
33                                                                                                         Aéroports de Montréal
34                                                                                                       Aéroport de Québec Inc.
35                                                                     Administration de l’aéroport international de Fredericton
36                                                              Administration de l’aéroport international du Grand Moncton Inc.
37                                                                                                   Aéroport de Saint John Inc.
38                                                     Administration de l’aéroport de Charlottetown Inc. (en anglais seulement)
39                                                                         Administration de l’aéroport international de Halifax
40                                              Administration de l’aéroport international de Gander Inc. (en anglais seulement)
41                                                                      Administration de l’aéroport international de St. John’s
42                                                                                    Gouvernement des Territoires du Nord-Ouest
43                                                                                                       Gouvernement du Nunavut
44                                                                                                         Gouvernement du Yukon</code></pre>
</div>
</div>
</section>
<section id="un-peu-de-regex" class="level2">
<h2 class="anchored" data-anchor-id="un-peu-de-regex">Un peu de regex</h2>
<p>Allons extraire les codes d’aéroports. 3 solutions :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>table_pipe2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(table_pipe, <span class="at">.keep=</span><span class="st">"all"</span>, <span class="at">new_col =</span> <span class="fu">str_extract_all</span>(<span class="at">string =</span> aeroport, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">([A-Z][A-Z][A-Z]</span><span class="sc">\\</span><span class="st">)"</span>))        <span class="co"># = "\\([A-Z]{3}\\)"</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>table_pipe3 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(table_pipe, <span class="at">.keep=</span><span class="st">"all"</span>, <span class="at">new_col =</span> <span class="fu">str_extract</span>(<span class="at">string =</span> aeroport, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">([A-Z][A-Z][A-Z]</span><span class="sc">\\</span><span class="st">)"</span>))        <span class="co"># = "\\([A-Z]{3}\\)"</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>table_pipe4 <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">extract</span>(<span class="at">data =</span> table_pipe, <span class="at">col =</span> aeroport, <span class="at">into =</span> <span class="st">"code"</span>, <span class="at">regex =</span> <span class="st">"([A-Z]{3})"</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Et supprimons-les des noms de villes :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>table_pipe5 <span class="ot">&lt;-</span> table_pipe4</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>table_pipe5<span class="sc">$</span>aeroport <span class="ot">&lt;-</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  table_pipe5<span class="sc">$</span>aeroport <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(<span class="at">pattern =</span> <span class="st">" </span><span class="sc">\\</span><span class="st">([A-Z]{3}</span><span class="sc">\\</span><span class="st">)"</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># au lieu d'inclure l'espace dans l'expression régulière, nous aurions pu utiliser str_squish</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Spécifions les types :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>table_pipe6 <span class="ot">&lt;-</span> table_pipe5 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">recode</span>(type, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Petits"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Nationaux"</span>, <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"Nationaux exploités admin"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>